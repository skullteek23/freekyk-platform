<ng-template #compProfileLoading>
  <mat-card class="_stats cards-r maxh-cards-r">
    <div class="_inside" fxLayoutGap="16px" fxLayout="column">
      <div fxLayout="column" fxLayoutGap="16px">
        <div *ngFor="let step of [1, 2, 3, 4, 5]" fxLayout="row nowrap" fxLayoutAlign="start center">
          <span class="_circle-small shine"> </span>
          <span class="shine _step"></span>
        </div>
        <div class="_progress shine"></div>
      </div>
    </div>
  </mat-card>
</ng-template>

<mat-card *ngIf="!isLoading; else compProfileLoading" class="mat-elevation-z8 maxh-cards-r cards-r">
  <div fxLayout fxLayoutAlign="space-between center" fxLayoutAlign.lt-md="center center">
    <span class="dash-h5 align">Finish these steps</span>
    <a [matMenuTriggerFor]="verticalMenu" fxHide.lt-md="true" class="material-icons-round">more_vert</a>
  </div>
  <div class="seperate" fxLayout="column" fxLayoutGap="8px">

    <div fxLayoutAlign="start center" fxLayoutGap="8px" *ngFor="let step of STEPS">
      <span class="material-icons-round filled" *ngIf="profileProgress >= step.targetValue; else unfilled">
        {{step.icon}} </span>
      <ng-template #unfilled>
        <span class="material-icons-round"> radio_button_unchecked </span>
      </ng-template>
      <a class="mat-body-1" (click)="onTapAction(step.action)"> {{step.text}} </a>
    </div>

    <!-- progress bar -->
    <div class="seperate">
      <span class="overline">{{
        profileProgress.toString() + "% Completed"
        }}</span>
      <div class="bar">
        <div class="progress" [style.width]="profileProgress.toString() + '%'"></div>
      </div>
    </div>
    <!-- progress bar -->
  </div>
</mat-card>

<mat-menu #verticalMenu>
  <a mat-menu-item [routerLink]="['/support']">Report problem</a>
</mat-menu>
