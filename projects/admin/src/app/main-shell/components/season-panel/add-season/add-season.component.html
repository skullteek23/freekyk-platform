<form [formGroup]="seasonForm" class="form-container" fxLayout="column">
  <section class="section-container" fxLayoutGap="20px" fxLayout fxLayout.lt-md="column"
    fxLayoutAlign="space-between start">
    <div class="field-container" fxLayout="column">
      <div fxLayout fxLayout.lt-md="column" fxLayoutGap.gt-sm="20px" class="state-city-container">
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Enter Season Name</mat-label>
          <input type="text" matInput formControlName="name" />
          <mat-error *ngIf="seasonForm.get('name').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Select State</mat-label>
          <mat-select formControlName="state">
            <mat-option *ngFor="let state of states" [value]="state">
              {{ state }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="seasonForm.get('state').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Select City</mat-label>
          <mat-select formControlName="city">
            <mat-option *ngFor="let city of cities" [value]="city">
              {{ city }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="seasonForm.get('city').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
      </div>
      <div fxLayout fxLayout.lt-md="column" fxLayoutGap.gt-sm="20px" class="state-city-container">
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Tournament Start Date</mat-label>
          <input matInput [min]="minDate" [max]="maxDate" formControlName="startDate" [matDatepicker]="startDate" />
          <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
          <mat-datepicker #startDate></mat-datepicker>
          <mat-error *ngIf="seasonForm.get('startDate').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Enter Season Fees (per team)</mat-label>
          <input type="number" matInput formControlName="fees" />
          <mat-error *ngIf="seasonForm.get('fees').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" color="primary">
          <mat-label>Enter Discount (in %)</mat-label>
          <input type="number" matInput formControlName="discount" />
          <mat-error *ngIf="seasonForm.get('discount').hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
        </mat-form-field>
      </div>
      <div fxLayout fxLayout.lt-md="column" fxLayoutGap.gt-sm="20px" class="state-city-container">
        <mat-form-field class="text-area-field" appearance="outline" color="primary">
          <mat-label>Mention Season Description</mat-label>
          <textarea [maxLength]="descriptionLimit" matInput formControlName="description"
            placeholder="Mention season description"></textarea>
          <mat-hint align="end">{{description?.value?.length}} / {{descriptionLimit}}</mat-hint>
          <mat-error *ngIf="description?.hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
          <mat-error *ngIf="description?.hasError('pattern')">
            {{messages.error.notAllowedCharacter}}
          </mat-error>
        </mat-form-field>
        <mat-form-field class="text-area-field" appearance="outline" color="primary">
          <mat-label>Mention Season Rules</mat-label>
          <textarea [maxLength]="rulesLimit" matInput formControlName="rules"
            placeholder="Mention season rules"></textarea>
          <mat-hint align="end">{{rules?.value?.length}} / {{rulesLimit}}</mat-hint>
          <mat-error *ngIf="rules?.hasError('required')">
            {{messages.error.requiredField}}
          </mat-error>
          <mat-error *ngIf="rules?.hasError('pattern')">
            {{messages.error.notAllowedCharacter}}
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <app-photo-uploader [defaultImgUrl]="seasonImageUrl" (changeUpload)="onChangeImage($event)"></app-photo-uploader>
  </section>
  <section class="section-container" fxLayoutAlign="center center">
    <div fxLayoutAlign="center center" fxLayout fxLayout.lt-md="column" class="team-selection" fxLayoutGap="20px">
      <mat-form-field appearance="outline" color="primary">
        <mat-label>Select Participating Teams</mat-label>
        <mat-select formControlName="participatingTeamsCount" (selectionChange)="onRestrictTournamentTypes($event)">
          <mat-option *ngFor="let team of teamsList" [value]="team">
            {{ team }} teams
          </mat-option>
        </mat-select>
        <mat-error *ngIf="seasonForm.get('participatingTeamsCount').hasError('required')">
          {{messages.error.requiredField}}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" color="primary">
        <mat-label>Select Containing Tournaments</mat-label>
        <mat-select
          [disabled]="!seasonForm.get('participatingTeamsCount').value || !seasonForm.get('participatingTeamsCount').dirty"
          formControlName="containingTournaments" multiple>
          <mat-option *ngFor="let type of tourTypesFiltered" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="seasonForm.get('participatingTeamsCount').hasError('required')">
          {{messages.error.requiredField}}
        </mat-error>
      </mat-form-field>
    </div>
  </section>
</form>
